CREATE VIEW `dane_konta` AS SELECT uzytkownik.idUzytkownika, login, czy_pracownik, czy_zablokowane, imie, nazwisko, email, nr_tel, miasto, ulica, nr_budynku, nr_lokalu, zadluzenie, calkowita_l_wypozyczen FROM uzytkownik join dane on uzytkownik.idUzytkownika = dane.idUzytkownika;


CREATE VIEW `dane_ksiazki` AS SELECT idKsiazka,tytul,dostepnosc,ISBN,data_wydania,imie AS imie_autora,nazwisko AS nazwisko_autora,kraj_pochodzenia AS kraj_pochodzenia_autora,wydawnictwo.nazwa AS wydawnictwo,gatunek.nazwa AS gatunek FROM ksiazka join gatunek on ksiazka.idGatunek = gatunek.idGatunek join wydawnictwo on ksiazka.idWydawnictwo = wydawnictwo.idWydawnictwo join autor on autor.idAutor = ksiazka.idAutor; Select * FROM dane_ksiazki WHERE CONCAT_WS(tytul, ' ',ISBN, ' ',data_wydania,' ',imie_autora,' ',nazwisko_autora, ' ', kraj_pochodzenia_autora, ' ', wydawnictwo, ' ', gatunek) LIKE '%" + tb->Text + "%' AND dostepnosc = 1 ORDER BY idKsiazka;


create view wypozyczenia_ksiazka as select wypozyczenie.idwypozyczenie, ksiazka.tytul, wypozyczenie.data_wypozyczenia, wypozyczenie.data_zwrotu, uzytkownik.login, dane.imie, dane.nazwisko from wypozyczenie inner join ksiazka on ksiazka.idKsiazka = wypozyczenie.idKsiazka inner join uzytkownik on uzytkownik.idUzytkownika = wypozyczenie.idUzytkownika inner join dane on dane.idUzytkownika = uzytkownik.idUzytkownika group by idWypozyczenie order by data_wypozyczenia; create procedure pokaz_wypozyczenia(in tytul Varchar(255)) select idWypozyczenie, login, imie, nazwisko, data_wypozyczenia, data_zwrotu from wypozyczenia_ksiazka where tytul not in ('') and wypozyczenia_ksiazka.tytul like concat('%', tytul, '%' ); 